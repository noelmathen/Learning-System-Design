# üîÅ Liskov Substitution Principle (LSP)

## üìò Introduction

The **Liskov Substitution Principle (LSP)** is the third principle in the **SOLID** framework ‚Äî a set of five core principles for writing **clean, scalable, and maintainable** object-oriented code.

> **L** stands for  **Liskov Substitution Principle** .

---

## üß© Definition

> **If S is a subtype of T, then objects of type T may be replaced with objects of type S without altering the correctness of the program.**

In simple terms,  **a subclass should behave in a way that doesn‚Äôt break the expectations of the parent class** .

If a child class changes the behavior so much that existing code breaks, it violates LSP.

---

## üß† Intuitive Example

If your code works fine using a parent class object, it should **still work** if you use a child class object instead ‚Äî without surprises or unexpected results.

For example, if your code expects a `Shape` and you pass in a `Circle`, everything should still work normally.

If the subclass **changes assumptions** made by the parent (e.g., changes how width or height behaves), that‚Äôs an  **LSP violation** .

---

## üêæ Real-Life Analogy

Imagine you run a **pet hotel** with these basic rules:

> Every pet must be able to be  **fed** ,  **walked** , and  **groomed** .

You‚Äôve had  **dogs** ,  **cats** , and **rabbits** stay ‚Äî all fine.

Now someone brings in a **snake** üêç:

| Expected Action    | Works for Snake? | Problem         |
| ------------------ | ---------------- | --------------- |
| Feed with pet food | ‚ùå               | Needs live mice |
| Walk the pet       | ‚ùå               | Doesn‚Äôt walk   |
| Groom the pet      | ‚ùå               | Makes no sense  |

Your pet hotel system just **broke** ‚Äî the snake violates the expected behavior of ‚Äúpets.‚Äù

That‚Äôs an  **LSP violation** .

‚úÖ A  **hamster** , on the other hand, might not walk outdoors but still fits the ‚Äúpet‚Äù contract ‚Äî it can be cared for and fed.

That‚Äôs  **valid substitution** .

---

## üí° Understanding the Principle

The **Pet Hotel** trusts that every "Pet" behaves in predictable ways.

If a new Pet (subclass) completely changes that, your whole system becomes fragile.

LSP ensures that **replacing a parent class with a subclass never breaks your program‚Äôs logic.**

---

## ‚ö†Ô∏è Example ‚Äî Rectangle vs Square (LSP Violation)

A classic example demonstrating how easily LSP can be broken.

<pre class="overflow-visible!" data-start="2527" data-end="3365"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-java"><span><span>// Rectangle class</span><span>
</span><span>class</span><span></span><span>Rectangle</span><span> {
    </span><span>int</span><span> width, height;

    </span><span>void</span><span></span><span>setWidth</span><span>(int</span><span> w) { width = w; }
    </span><span>void</span><span></span><span>setHeight</span><span>(int</span><span> h) { height = h; }
    </span><span>int</span><span></span><span>getArea</span><span>()</span><span> { </span><span>return</span><span> width * height; }
}

</span><span>// Square class extending Rectangle</span><span>
</span><span>class</span><span></span><span>Square</span><span></span><span>extends</span><span></span><span>Rectangle</span><span> {
    </span><span>@Override</span><span> 
    </span><span>void</span><span></span><span>setWidth</span><span>(int</span><span> w) {
        width = w;
        height = w; </span><span>// Forces both to be equal</span><span>
    }

    </span><span>@Override</span><span>
    </span><span>void</span><span></span><span>setHeight</span><span>(int</span><span> h) {
        height = h;
        width = h; </span><span>// Forces both to be equal</span><span>
    }
}

</span><span>// Main class</span><span>
</span><span>class</span><span></span><span>Main</span><span> {
    </span><span>public</span><span></span><span>static</span><span></span><span>void</span><span></span><span>main</span><span>(String[] args)</span><span> {
        </span><span>Rectangle</span><span></span><span>r</span><span></span><span>=</span><span></span><span>new</span><span></span><span>Square</span><span>(); </span><span>// Substituting subclass</span><span>
        printArea(r);
    }

    </span><span>private</span><span></span><span>static</span><span></span><span>void</span><span></span><span>printArea</span><span>(Rectangle r)</span><span> {
        r.setWidth(</span><span>5</span><span>);
        r.setHeight(</span><span>10</span><span>);
        System.out.println(r.getArea()); </span><span>// Expected 50, Actual 100</span><span>
    }
}
</span></span></code></div></div></pre>

---

### ‚ùå Violation Explained

* **Expected Output:** 50
* **Actual Output:** 100

The **Square** changes how `setWidth` and `setHeight` work ‚Äî breaking the expected behavior of `Rectangle`.

So `Square` **is not a true subtype** of `Rectangle`.

That‚Äôs an  **LSP violation** .

---

## ‚úÖ Need for LSP ‚Äî Example: Notification System

Let‚Äôs look at a valid substitution example.

<pre class="overflow-visible!" data-start="3755" data-end="4467"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-java"><span><span>// Base class</span><span>
</span><span>class</span><span></span><span>Notification</span><span> {
    </span><span>public</span><span></span><span>void</span><span></span><span>sendNotification</span><span>()</span><span> {
        System.out.println(</span><span>"Notification sent"</span><span>);
    }
}

</span><span>// Email Notification</span><span>
</span><span>class</span><span></span><span>EmailNotification</span><span></span><span>extends</span><span></span><span>Notification</span><span> {
    </span><span>@Override</span><span>
    </span><span>public</span><span></span><span>void</span><span></span><span>sendNotification</span><span>()</span><span> {
        System.out.println(</span><span>"Email Notification sent"</span><span>);
    }
}

</span><span>// Text Notification</span><span>
</span><span>class</span><span></span><span>TextNotification</span><span></span><span>extends</span><span></span><span>Notification</span><span> {
    </span><span>@Override</span><span>
    </span><span>public</span><span></span><span>void</span><span></span><span>sendNotification</span><span>()</span><span> {
        System.out.println(</span><span>"Text Notification sent"</span><span>);
    }
}

</span><span>// Main</span><span>
</span><span>class</span><span></span><span>Main</span><span> {
    </span><span>public</span><span></span><span>static</span><span></span><span>void</span><span></span><span>main</span><span>(String[] args)</span><span> {
        </span><span>Notification</span><span></span><span>notification</span><span></span><span>=</span><span></span><span>new</span><span></span><span>EmailNotification</span><span>(); </span><span>// Substitution</span><span>
        notification.sendNotification(); </span><span>// Works fine</span><span>
    }
}
</span></span></code></div></div></pre>

---

### üß† Explanation

* **Parent Class:** `Notification` defines a standard behavior.
* **Child Classes:** `EmailNotification` and `TextNotification` extend it  **without changing expected behavior** .
* **Result:** We can replace `Notification` with any subclass, and the system works perfectly.

That‚Äôs proper use of **LSP** ‚Äî extend functionality safely, without breaking the system.

---

## üß© Why LSP Matters

When LSP is  **violated** , the system becomes:

| Problem                    | Description                                            |
| -------------------------- | ------------------------------------------------------ |
| **Unpredictable**    | Base class assumptions no longer hold.                 |
| **Hard to Maintain** | Every new subclass needs re-testing across the system. |
| **Bug-Prone**        | Wrong results, runtime errors, or inconsistent state.  |
| **Less Reusable**    | Substitution becomes dangerous.                        |
| **Tightly Coupled**  | Client code depends on specific subclass behavior.     |

LSP ensures that your code remains  **robust, predictable, and easy to extend** .

---

## üîç How to Spot LSP Violations

Ask yourself these questions:

* Does the subclass override methods in a way that changes their meaning?
* Can I replace the parent with the subclass everywhere  **without breaking anything** ?
* Does the subclass throw **unexpected exceptions** or return  **wrong values** ?
* Does the subclass weaken preconditions or strengthen postconditions?

If you answer **‚Äúyes‚Äù** to any of these ‚Äî you likely have an  **LSP violation** .

---

## üß≠ Key Guidelines to Follow

‚úÖ **Honor the Parent Contract:**

Subclasses must fulfill the promises of the parent class ‚Äî not redefine them.

‚úÖ **Avoid Behavior Changes:**

Overridden methods should not alter how the class is expected to work.

‚úÖ **Prefer Composition over Inheritance:**

If subclassing forces you to violate behavior, use **composition** instead.

‚úÖ **Design for Behavioral Compatibility:**

Focus on  *what the object does* , not  *how it does it* .

‚úÖ **Extend, Don‚Äôt Restrict:**

A subclass should **extend** functionality, not **limit** it.

---

## üß± Concept Diagram

<pre class="overflow-visible!" data-start="6516" data-end="6956"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-text"><span><span>          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ     Notification     ‚îÇ
          ‚îÇ  sendNotification()  ‚îÇ
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                           ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ EmailNotification ‚îÇ     ‚îÇ TextNotification ‚îÇ
‚îÇ sendNotification() ‚îÇ     ‚îÇ sendNotification() ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span></span></code></div></div></pre>

All subclasses **respect** the behavior of the parent class and can replace it safely.

---

## üßæ Summary

| Aspect                  | Description                                               |
| ----------------------- | --------------------------------------------------------- |
| **Principle**     | Subclasses must be substitutable for their parent classes |
| **Goal**          | Maintain behavioral consistency when extending code       |
| **When Violated** | When subclass breaks expectations or base logic           |
| **Fix**           | Use composition or redesign contracts                     |
| **Result**        | Stable, extensible, and maintainable systems              |

---

## üß† Final Thought

The **Liskov Substitution Principle** is what keeps your inheritance trees  **logical and predictable** .

It ensures that extending functionality doesn‚Äôt come at the cost of stability.

> If your subclass surprises the parent class ‚Äî you‚Äôve broken trust.
>
> And in software,  **trust = maintainability** .
